<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SM VIP SIGNALS | Premium Trading Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- New Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&family=Orbitron:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="img/Crop Logo.png">
    
    <style>
        /* Font Assignments */
        :root {
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Inter', sans-serif;
            --font-tech: 'Orbitron', sans-serif;
            --accent-color: #e3342f;
        }

        body {
            font-family: var(--font-body);
            background: #ffffff;
            color: #333333;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            font-size: 16px; /* Normal base font size */
        }

        h1, h2, h3, h4, h5, h6, .heading-font {
            font-family: var(--font-heading);
        }

        .tech-font {
            font-family: var(--font-tech);
        }

        /* Normalized Font Sizes */
        h1 {
            font-size: 2.5rem;
            line-height: 1.2;
        }
        
        h2 {
            font-size: 2rem;
            line-height: 1.3;
        }
        
        h3 {
            font-size: 1.75rem;
            line-height: 1.4;
        }
        
        h4 {
            font-size: 1.5rem;
            line-height: 1.4;
        }
        
        p, .text-base {
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .text-sm {
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .text-xs {
            font-size: 0.75rem;
            line-height: 1.4;
        }

        /* Responsive font adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.75rem;
            }
            
            h3 {
                font-size: 1.5rem;
            }
            
            h4 {
                font-size: 1.25rem;
            }
            
            p, .text-base {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.75rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.25rem;
            }
            
            h4 {
                font-size: 1.125rem;
            }
        }

        /* Red Text */
        .red-text {
            color: #e3342f;
            font-weight: 700;
        }

        /* Modern Navigation Bar */
        .modern-nav {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(229, 231, 235, 0.8);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            min-height: 70px;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            flex-shrink: 0;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #e3342f, #f56565);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .logo-text {
            font-family: var(--font-heading);
            font-weight: 800;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #e3342f, #8b0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            white-space: nowrap;
        }

        @media (max-width: 900px) {
            .logo-text {
                font-size: 1.2rem;
            }
            
            .logo-icon {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
        }

        @media (max-width: 640px) {
            .logo-text {
                font-size: 1.1rem;
            }
            
            .logo-icon {
                width: 32px;
                height: 32px;
            }
        }

        @media (max-width: 380px) {
            .logo-text {
                display: none;
            }
            
            .nav-logo {
                gap: 8px;
            }
            
            .logo-icon {
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
            }
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .nav-link {
            font-family: var(--font-body);
            font-weight: 500;
            color: #4b5563;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            white-space: nowrap;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            color: #e3342f;
            background: rgba(227, 52, 47, 0.05);
        }

        .nav-link.active {
            color: #e3342f;
            font-weight: 600;
            background: rgba(227, 52, 47, 0.1);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 1rem;
            right: 1rem;
            height: 3px;
            background: #e3342f;
            border-radius: 3px;
        }

        /* NAVIGATION ICONS */
        .nav-link i, 
        .mobile-nav-link i,
        .btn-modern i,
        .btn-modern-outline i,
        .dropdown-item i,
        .notification-badge i {
            font-size: 0.9rem;
            width: 16px;
            text-align: center;
        }

        .nav-link i {
            margin-right: 6px;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        /* Glassmorphism Account Icon */
        .glass-account-container {
            position: relative;
        }

        .glass-account-icon {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #e3342f;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .glass-account-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
            border-color: rgba(227, 52, 47, 0.5);
        }

        .glass-account-icon.vip {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 237, 78, 0.3));
            border-color: rgba(255, 215, 0, 0.4);
            color: #b8860b;
        }

        .glass-account-icon .initials {
            font-weight: 700;
            font-size: 1rem;
        }

        .glass-account-icon .status-dot {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
            border: 2px solid white;
        }

        .glass-account-icon .status-dot.offline {
            background: #9ca3af;
        }

        /* Glassmorphism Dropdown */
        .glass-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            width: 320px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow: hidden;
        }

        .glass-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .glass-dropdown-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(227, 52, 47, 0.1), rgba(245, 101, 101, 0.05));
            border-bottom: 1px solid rgba(229, 231, 235, 0.5);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .glass-dropdown-header .avatar-large {
            width: 60px;
            height: 60px;
            background: rgba(227, 52, 47, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #e3342f;
            border: 2px solid rgba(227, 52, 47, 0.2);
        }

        .glass-dropdown-body {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.7);
        }

        .glass-dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 12px;
            color: #4b5563;
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .glass-dropdown-item:hover {
            background: rgba(227, 52, 47, 0.08);
            color: #e3342f;
            transform: translateX(5px);
        }

        .glass-dropdown-item i {
            width: 20px;
            text-align: center;
            font-size: 1rem;
        }

        .glass-dropdown-footer {
            padding: 1rem;
            border-top: 1px solid rgba(229, 231, 235, 0.5);
            background: rgba(249, 250, 251, 0.7);
        }

        /* Modern Button */
        .btn-modern {
            background: linear-gradient(135deg, #e3342f, #c53030);
            color: white;
            font-weight: 600;
            padding: 0.6rem 1.5rem;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(227, 52, 47, 0.2);
            font-size: 0.95rem;
            white-space: nowrap;
        }

        .btn-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(227, 52, 47, 0.3);
        }

        .btn-modern-outline {
            background: transparent;
            color: #e3342f;
            border: 2px solid #e3342f;
            font-weight: 600;
            padding: 0.6rem 1.5rem;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            white-space: nowrap;
        }

        .btn-modern-outline:hover {
            background: rgba(227, 52, 47, 0.1);
        }

        /* Notification Badge */
        .notification-badge {
            position: relative;
            cursor: pointer;
        }

        .badge-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e3342f;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* Profile Dropdown */
        .profile-dropdown-modern {
            position: relative;
            display: none; /* Hide old profile dropdown */
        }

        .profile-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .profile-toggle:hover {
            background: rgba(229, 231, 235, 0.5);
        }

        .profile-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #e3342f, #f56565);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .profile-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .profile-name {
            font-weight: 600;
            color: #1f2937;
            font-size: 0.95rem;
            white-space: nowrap;
        }

        .vip-badge {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #7c2d12;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
        }

        /* Dropdown Menu */
        .dropdown-menu {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            width: 280px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            background: linear-gradient(135deg, #fef2f2, #fff5f5);
            border-radius: 12px 12px 0 0;
        }

        .dropdown-body {
            padding: 1rem;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            color: #4b5563;
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: #f9fafb;
            color: #e3342f;
        }

        .dropdown-item i {
            width: 20px;
            text-align: center;
        }

        .dropdown-footer {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: #4b5563;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .mobile-menu-btn:hover {
            background: rgba(229, 231, 235, 0.5);
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: white;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transform: translateY(-100%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            max-height: calc(100vh - 70px);
            overflow-y: auto;
        }

        .mobile-nav.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .mobile-nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .mobile-nav-link {
            padding: 1rem;
            border-radius: 8px;
            color: #4b5563;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1rem;
        }

        .mobile-nav-link:hover,
        .mobile-nav-link.active {
            background: #fef2f2;
            color: #e3342f;
        }

        .mobile-nav-actions {
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .mobile-profile-dropdown {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .mobile-profile-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .mobile-profile-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Notification Dropdown */
        .notification-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            width: 380px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .notification-header {
            padding: 1.25rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.2s ease;
            cursor: pointer;
        }

        .notification-item:hover {
            background: #f9fafb;
        }

        .notification-item.unread {
            background: #fef2f2;
        }

        .notification-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
        }

        /* Offer Notification Styles */
        .notification-item.offer {
            border-left: 4px solid #f59e0b;
        }

        .notification-item.signal {
            border-left: 4px solid #10b981;
        }

        .notification-item.urgent {
            border-left: 4px solid #ef4444;
        }

        .offer-badge {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: #7c2d12;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: auto;
        }

        /* Main Website Content */
        #main-website {
            margin-top: 70px;
            transition: opacity 0.3s ease;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .progress-bar {
            width: min(300px, 90%);
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e3342f, #f56565);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #e3342f;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1002;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            animation: slideUp 0.4s ease;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #e3342f, #c53030);
            padding: 1.75rem;
            text-align: center;
            flex-shrink: 0;
        }

        .modal-header h3 {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            flex: 1;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #374151;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1.5px solid #d1d5db;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f9fafb;
            box-sizing: border-box;
            -webkit-appearance: none;
        }

        .form-input:focus {
            outline: none;
            border-color: #e3342f;
            background: white;
            box-shadow: 0 0 0 3px rgba(227, 52, 47, 0.1);
        }

        .modal-footer {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-shrink: 0;
        }

        .modal-footer .btn-modern {
            flex: 1;
            justify-content: center;
            padding: 0.875rem;
            font-size: 1rem;
        }

        .modal-footer .btn-modern-outline {
            flex: 1;
            justify-content: center;
            padding: 0.875rem;
            font-size: 1rem;
        }

        .modal-links {
            text-align: center;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
            flex-shrink: 0;
        }

        .modal-links a {
            color: #6b7280;
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s ease;
        }

        .modal-links a:hover {
            color: #e3342f;
        }

        .modal-links .admin-link {
            color: #3b82f6;
            font-weight: 500;
        }

        .modal-links .admin-link:hover {
            color: #1d4ed8;
        }

        /* Register Modal */
        .register-tab, .login-tab {
            padding: 1rem;
            background: none;
            border: none;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            flex: 1;
            font-size: 1rem;
        }

        .register-tab.active, .login-tab.active {
            color: #e3342f;
            border-bottom-color: #e3342f;
        }

        .modal-tabs {
            display: flex;
            justify-content: center;
            border-bottom: 1px solid #e5e7eb;
            background: #f9fafb;
        }

        /* MOBILE SPECIFIC FIXES */
        @media (max-width: 768px) {
            body.modal-open {
                overflow: hidden;
                position: fixed;
                width: 100%;
                height: 100%;
            }
            
            .modal {
                padding: 0;
                margin: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(0,0,0,0.8);
            }
            
            .modal-content {
                margin: 0;
                width: 100%;
                height: 100%;
                max-width: 100%;
                max-height: 100%;
                border-radius: 0;
                animation: mobileSlideUp 0.3s ease;
                position: relative;
            }
            
            @keyframes mobileSlideUp {
                from {
                    transform: translateY(100%);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            .modal-header {
                padding: 1.5rem;
                position: relative;
            }
            
            .modal-header h3 {
                font-size: 1.3rem;
            }
            
            .modal-body {
                padding: 1.5rem;
                padding-bottom: 100px;
            }
            
            .form-input {
                font-size: 16px;
                padding: 1rem;
            }
            
            .modal-footer {
                flex-direction: column;
                gap: 0.75rem;
                margin-top: 1.5rem;
            }
            
            .modal-footer .btn-modern,
            .modal-footer .btn-modern-outline {
                padding: 1rem;
                font-size: 1.1rem;
            }
            
            @supports (padding: max(0px)) {
                .modal-body {
                    padding-left: max(1.5rem, env(safe-area-inset-left));
                    padding-right: max(1.5rem, env(safe-area-inset-right));
                    padding-bottom: max(100px, env(safe-area-inset-bottom) + 80px);
                }
                
                .modal-footer {
                    padding-bottom: env(safe-area-inset-bottom);
                }
            }
        }

        @media (max-width: 480px) {
            .modal-body {
                padding: 1.25rem;
            }
            
            .nav-container {
                padding: 0 0.75rem;
            }
            
            .nav-right {
                gap: 0.75rem;
            }
            
            .btn-modern, .btn-modern-outline {
                padding: 0.5rem 1rem;
            }
            
            .notification-dropdown {
                width: 320px;
                right: -10px;
            }
        }

        @media (max-height: 600px) and (orientation: landscape) {
            .modal-content {
                max-height: 100vh;
            }
            
            .modal-body {
                max-height: 60vh;
            }
            
            .modal-footer {
                margin-top: 1rem;
            }
        }

        /* WhatsApp Field */
        .whatsapp-field {
            position: relative;
        }

        .whatsapp-field .form-input {
            padding-left: 4rem;
        }

        .whatsapp-prefix {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-weight: 500;
            font-size: 1rem;
        }

        /* Results Locked */
        .results-locked {
            position: relative;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fafafa, #f0f0f0);
            border-radius: 12px;
            border: 2px dashed #e5e7eb;
        }

        .locked-overlay {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 3rem;
            border-radius: 12px;
        }

        .lock-icon {
            font-size: 3rem;
            color: #e3342f;
            margin-bottom: 1rem;
        }

        /* Logout Button */
        .logout-btn {
            background: #f3f4f6;
            color: #6b7280;
            border: 1.5px solid #d1d5db;
            padding: 0.875rem 1.5rem;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
        }

        .logout-btn:hover {
            background: #ef4444;
            color: white;
            border-color: #dc2626;
        }

        /* Simple Card */
        .simple-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .simple-card:hover {
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-simple {
            background: linear-gradient(135deg, #e3342f, #c53030);
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn-simple:hover {
            background: linear-gradient(135deg, #c53030, #a51c1c);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(227, 52, 47, 0.2);
        }

        /* Section Background */
        .section-bg {
            background: linear-gradient(135deg, #f9fafb, #f3f4f6);
            border-top: 1px solid #e5e7eb;
            border-bottom: 1px solid #e5e7eb;
        }

        /* Stats Counter Style */
        .stat-number {
            font-family: var(--font-tech);
            font-weight: 700;
            color: #e3342f;
        }

        /* Footer Style for SM VIP SIGNALS */
        .footer-simple {
            background: linear-gradient(135deg, #111827, #1f2937);
            color: #f9fafb;
            border-top: 2px solid #e3342f;
        }

        /* Dark Red Text */
        .dark-red-text {
            color: #8b0000;
            font-weight: 800;
        }

        /* VIP Timer Badge */
        .vip-timer {
            background: linear-gradient(135deg, #e3342f, #ff6b6b);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Fade In Animation */
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden {
            display: none !important;
        }

        .red-accent {
            border-left: 3px solid #e3342f;
        }

        /* Signal Results Table */
        .results-table {
            width: 100%;
            border-collapse: collapse;
        }

        .results-table th {
            background: #f3f4f6;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #e5e7eb;
        }

        .results-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .profit-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .profit-positive {
            background: #d1fae5;
            color: #065f46;
        }

        .profit-negative {
            background: #fee2e2;
            color: #991b1b;
        }
        
        /* RESPONSIVE NAVIGATION IMPROVEMENTS */
        @media (max-width: 1200px) {
            .nav-center {
                gap: 1rem;
            }
            
            .nav-link {
                padding: 0.5rem 0.75rem;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 1024px) {
            .nav-center {
                display: none;
            }
            
            .nav-right .glass-account-container:not(.mobile-visible) {
                display: none !important;
            }
            
            .nav-right .notification-badge:not(.mobile-notification) {
                display: none;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .nav-container {
                padding: 0 1rem;
            }
        }
        
        @media (min-width: 1025px) {
            .mobile-nav {
                display: none;
            }
        }
        
        @media (max-width: 640px) {
            .nav-content {
                height: 60px;
                min-height: 60px;
            }
            
            .modern-nav {
                padding: 0;
            }
            
            .mobile-nav {
                top: 60px;
                max-height: calc(100vh - 60px);
            }
            
            #main-website {
                margin-top: 60px;
            }
            
            .nav-right {
                gap: 0.5rem;
            }
        }
        
        /* OFFERS SECTION STYLES */
        .offers-section {
            background: linear-gradient(135deg, #fef2f2, #fff5f5);
            border-top: 1px solid #fee2e2;
            border-bottom: 1px solid #fee2e2;
        }

        .offer-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(227, 52, 47, 0.15);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(227, 52, 47, 0.25);
            border-color: #e3342f;
        }

        .offer-card.featured {
            border: 2px solid #f59e0b;
        }

        .offer-header {
            background: linear-gradient(135deg, #e3342f, #c53030);
            padding: 1.5rem;
            color: white;
            position: relative;
        }

        .offer-badge {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: #7c2d12;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            position: absolute;
            top: -10px;
            right: 20px;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .offer-timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 12px;
            margin-top: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: var(--font-tech);
        }

        .timer-numbers {
            font-size: 1.2rem;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .offer-body {
            padding: 2rem;
        }

        .offer-price {
            font-size: 2.5rem;
            font-weight: 800;
            color: #e3342f;
            margin-bottom: 0.5rem;
        }

        .offer-price span {
            font-size: 1rem;
            color: #6b7280;
        }

        .offer-features {
            list-style: none;
            padding: 0;
            margin: 1.5rem 0;
        }

        .offer-features li {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .offer-features i {
            color: #10b981;
        }

        .claim-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .claim-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }

        .offer-expired {
            background: #6b7280;
            cursor: not-allowed;
        }

        .offer-expired:hover {
            background: #6b7280;
            transform: none;
            box-shadow: none;
        }

        .offer-countdown {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .countdown-item {
            text-align: center;
            background: white;
            padding: 0.75rem;
            border-radius: 10px;
            min-width: 60px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .countdown-number {
            font-size: 1.5rem;
            font-weight: 800;
            color: #e3342f;
            font-family: var(--font-tech);
        }

        .countdown-label {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        /* CAKE HEAVEN FOOTER STYLES */
        .minimal-footer {
            background: linear-gradient(135deg, #111827, #1f2937);
            color: #f9fafb;
            padding: 4rem 0 2rem;
            margin-top: 4rem;
            border-top: 2px solid var(--accent-color);
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 3rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 1024px) {
            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .footer-container {
                padding: 0 1rem;
            }
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 1.5rem;
        }

        .cake-animation {
            position: relative;
            width: 45px;
            height: 45px;
        }

        .cake-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            animation: cakeFloat 3s ease-in-out infinite;
        }

        @keyframes cakeFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

/* Crypto Footer Styles */
    .simple-footer {
        background: linear-gradient(135deg, #111827, #1f2937);
        color: #f9fafb;
        padding: 4rem 0 2rem;
        margin-top: 4rem;
        border-top: 2px solid var(--accent-color);
    }

    .footer-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .footer-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 3rem;
        margin-bottom: 3rem;
    }

    @media (max-width: 1024px) {
        .footer-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 640px) {
        .footer-grid {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .footer-container {
            padding: 0 1rem;
        }
    }

    .footer-logo {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 1.5rem;
    }

    .footer-logo .logo-icon {
        width: 45px;
        height: 45px;
        background: linear-gradient(135deg, #e3342f, #f56565);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
    }

    .footer-logo .logo-text {
        font-family: var(--font-heading);
        font-weight: 800;
        font-size: 1.3rem;
        background: linear-gradient(135deg, #e3342f, #8b0000);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        white-space: nowrap;
    }

    .footer-description {
        color: #cbd5e1;
        line-height: 1.6;
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
    }

    .social-links {
        display: flex;
        gap: 1rem;
    }

    .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        color: #f9fafb;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 1rem;
    }

    .social-link:hover {
        background: var(--accent-color);
        transform: translateY(-3px);
    }

    .footer-heading {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: white;
        font-family: var(--font-heading);
    }

    .footer-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .footer-links li {
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
    }

    .footer-links li i {
        margin-right: 8px;
        color: var(--accent-color);
        width: 20px;
    }

    .footer-link {
        color: #cbd5e1;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 0.95rem;
    }

    .footer-link:hover {
        color: var(--accent-color);
        transform: translateX(5px);
    }

    .footer-bottom {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 2rem;
        text-align: center;
        color: #94a3b8;
        font-size: 0.9rem;
    }

    .footer-bottom a {
        color: var(--accent-color);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .footer-bottom a:hover {
        text-decoration: underline;
    }
    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="text-center">
            <div class="loading-spinner"></div>
            <h2 class="text-3xl font-bold mb-6 heading-font dark-red-text">VIP SIGNALS HUB</h2>
            <p class="text-gray-600 mb-8 max-w-md mx-auto">
                Loading main trading platform... Please wait
            </p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p class="text-gray-400 text-sm mt-4" id="loading-text">Preparing premium signals...</p>
        </div>
    </div>

    <!-- Modern Navigation Bar -->
    <nav class="modern-nav">
        <div class="nav-container">
            <div class="nav-content">
                <!-- Logo -->
                <a href="#home" class="nav-logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="logo-text">SM VIP SIGNALS</div>
                </a>

                <!-- Desktop Navigation Links -->
                <div class="nav-center">
                    <a href="#home" class="nav-link active" data-section="home">
                        <i class="fas fa-home mr-2"></i>
                        Home
                    </a>
                    <a href="#announcements" class="nav-link" data-section="announcements">
                        <i class="fas fa-bullhorn mr-2"></i>
                        Announcements
                    </a>
                    <a href="#signals" class="nav-link" data-section="signals">
                        <i class="fas fa-signal mr-2"></i>
                        Free Signals
                    </a>
                    <a href="#results" class="nav-link" data-section="results">
                        <i class="fas fa-trophy mr-2"></i>
                        VIP Results
                    </a>
                    <a href="#pricing" class="nav-link" data-section="pricing">
                        <i class="fas fa-crown mr-2"></i>
                        Pricing
                    </a>
                </div>

                <!-- Right Side Actions -->
                <div class="nav-right">
                    <!-- Glassmorphism Account Icon -->
                    <div class="glass-account-container" id="glass-account">
                        <div class="glass-account-icon" id="glass-account-icon">
                            <div class="initials" id="glass-initials">G</div>
                            <div class="status-dot offline" id="glass-status"></div>
                        </div>
                        
                        <!-- Glassmorphism Dropdown -->
                        <div class="glass-dropdown" id="glass-dropdown">
                            <div class="glass-dropdown-header">
                                <div class="avatar-large" id="glass-avatar-large">G</div>
                                <div>
                                    <h4 class="font-bold text-gray-800" id="glass-username">Guest</h4>
                                    <p class="text-sm text-gray-600" id="glass-email">Login to access VIP features</p>
                                    <div class="vip-timer mt-1 hidden" id="glass-vip-timer">
                                        <i class="fas fa-clock"></i>
                                        <span id="glass-vip-days">0</span> days remaining
                                    </div>
                                </div>
                            </div>
                            <div class="glass-dropdown-body">
                                <button class="glass-dropdown-item" id="glass-login-btn">
                                    <i class="fas fa-sign-in-alt"></i>
                                    <span>Login</span>
                                </button>
                                <a href="#offers" class="glass-dropdown-item">
                                    <i class="fas fa-gift"></i>
                                    <span>Special Offers</span>
                                </a>
                                <button class="glass-dropdown-item" id="glass-renew-vip">
                                    <i class="fas fa-crown"></i>
                                    <span>Renew VIP</span>
                                </button>
                                <button class="glass-dropdown-item">
                                    <i class="fas fa-headset"></i>
                                    <span>Support</span>
                                </button>
                                <button class="glass-dropdown-item">
                                    <i class="fas fa-cog"></i>
                                    <span>Settings</span>
                                </button>
                            </div>
                            <div class="glass-dropdown-footer">
                                <button class="logout-btn hidden" id="glass-logout-btn">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Logout
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Notification -->
                    <div class="notification-badge" id="notification-container">
                        <button class="btn-modern-outline" id="notification-btn">
                            <i class="fas fa-bell"></i>
                        </button>
                        <span class="badge-count" id="notification-count">0</span>
                        
                        <!-- Notification Dropdown -->
                        <div class="notification-dropdown" id="notification-dropdown">
                            <div class="notification-header">
                                <h4 class="font-bold text-lg">Notifications</h4>
                                <button class="text-sm text-red-600 font-medium" id="mark-all-read">Mark all as read</button>
                            </div>
                            <div class="notification-list" id="notification-list">
                                <!-- Notifications will be populated by JavaScript -->
                            </div>
                            <div class="notification-header">
                                <a href="#offers" class="text-sm text-red-600 font-medium">View all offers</a>
                            </div>
                        </div>
                    </div>

                    <!-- Join VIP Button -->
                    <button class="btn-modern" id="join-vip-btn">
                        <i class="fas fa-lock-open"></i>
                        JOIN VIP
                    </button>

                    <!-- Mobile Menu Button -->
                    <button class="mobile-menu-btn" id="mobile-menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div class="mobile-nav" id="mobile-nav">
            <div class="mobile-nav-links">
                <a href="#home" class="mobile-nav-link active" data-section="home">
                    <i class="fas fa-home"></i>
                    Home
                </a>
                <a href="#offers" class="mobile-nav-link" data-section="offers">
                    <i class="fas fa-gift"></i>
                    Special Offers
                </a>
                <a href="#announcements" class="mobile-nav-link" data-section="announcements">
                    <i class="fas fa-bullhorn"></i>
                    Announcements
                </a>
                <a href="#signals" class="mobile-nav-link" data-section="signals">
                    <i class="fas fa-signal"></i>
                    Free Signals
                </a>
                <a href="#results" class="mobile-nav-link" data-section="results">
                    <i class="fas fa-trophy"></i>
                    VIP Results
                </a>
                <a href="#pricing" class="mobile-nav-link" data-section="pricing">
                    <i class="fas fa-crown"></i>
                    Pricing
                </a>
                <a href="#about" class="mobile-nav-link" data-section="about">
                    <i class="fas fa-info-circle"></i>
                    About
                </a>
            </div>
            
            <div class="mobile-nav-actions">
                <!-- Mobile Notification -->
                <div class="notification-badge mobile-notification">
                    <button class="btn-modern-outline w-full" id="mobile-notification-btn">
                        <i class="fas fa-bell"></i>
                        Notifications
                        <span class="badge-count">0</span>
                    </button>
                </div>
                
                <!-- Mobile Join VIP Button -->
                <button class="btn-modern w-full" id="mobile-join-vip-btn">
                    <i class="fas fa-lock-open"></i>
                    JOIN VIP NOW
                </button>
                
                <!-- Mobile Profile Section -->
                <div class="mobile-profile-dropdown">
                    <div class="mobile-profile-header">
                        <!-- Glassmorphism icon for mobile -->
                        <div class="glass-account-icon mobile-visible" id="mobile-glass-icon">
                            <div class="initials" id="mobile-glass-initials">G</div>
                            <div class="status-dot offline" id="mobile-glass-status"></div>
                        </div>
                        <div>
                            <h4 class="font-bold" id="mobile-profile-name">Guest</h4>
                            <p class="text-gray-600 text-sm" id="mobile-vip-status">Login to continue</p>
                            <div class="vip-timer mt-1 hidden" id="mobile-vip-timer">
                                <i class="fas fa-clock"></i>
                                <span id="mobile-vip-days">0</span> days remaining
                            </div>
                        </div>
                    </div>
                    <div class="mobile-profile-actions">
                        <button class="btn-simple w-full" id="mobile-login-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Login
                        </button>
                        <a href="#offers" class="btn-modern-outline w-full text-center">
                            <i class="fas fa-gift"></i>
                            View Offers
                        </a>
                        <button class="logout-btn w-full hidden" id="mobile-logout-btn">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ACCOUNT LOGIN</h3>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="login-tab active" id="loginTabBtn">LOGIN</button>
                    <button class="register-tab" id="registerTabBtn">REGISTER</button>
                </div>
                
                <!-- Login Form -->
                <div id="loginForm" class="pt-4">
                    <div class="space-y-6">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="loginUsername" 
                                   class="form-input"
                                   placeholder="Enter your username">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="loginPassword" 
                                   class="form-input"
                                   placeholder="Enter your password">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="loginSubmit" class="btn-modern">
                            <i class="fas fa-sign-in-alt"></i>
                            LOGIN
                        </button>
                        <button id="closeLogin" class="btn-modern-outline">
                            CANCEL
                        </button>
                    </div>
                    <div class="modal-links">
                        <p class="text-gray-500 text-sm mb-2">Don't have an account? <a href="#" class="text-red-600 font-medium" id="switchToRegister">Register Now</a></p>
                        <p class="text-gray-500 text-sm">
                            <a href="#" class="admin-link">Login</a>
                        </p>
                    </div>
                </div>

                <!-- Register Form -->
                <div id="registerForm" class="pt-4 hidden">
                    <div class="space-y-6">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="registerUsername" 
                                   class="form-input"
                                   placeholder="Choose a username">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" id="registerEmail" 
                                   class="form-input"
                                   placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="registerPassword" 
                                   class="form-input"
                                   placeholder="Enter your password">
                            <p class="text-xs text-gray-500 mt-1">Minimum 8 characters with letters and numbers</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" id="registerConfirmPassword" 
                                   class="form-input"
                                   placeholder="Confirm your password">
                        </div>
                        <div class="form-group whatsapp-field">
                            <label class="form-label">WhatsApp Number</label>
                            <div class="whatsapp-prefix">+94</div>
                            <input type="tel" id="registerWhatsApp" 
                                   class="form-input"
                                   placeholder="771234567"
                                   maxlength="10"
                                   pattern="[0-9]{10}"
                                   title="Please enter a 10-digit WhatsApp number (without spaces)">
                            <p class="text-xs text-gray-500 mt-1">Enter 10-digit number without spaces (eg: 771234567)</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="registerSubmit" class="btn-modern">
                            <i class="fas fa-user-plus"></i>
                            REGISTER
                        </button>
                        <button id="closeRegister" class="btn-modern-outline">
                            CANCEL
                        </button>
                    </div>
                    <div class="modal-links">
                        <p class="text-gray-500 text-sm mb-2">Already have an account? <a href="#" class="text-red-600 font-medium" id="switchToLogin">Login Here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Website Content -->
    <div id="main-website" class="hidden">
        <!-- Home Section -->
        <section id="home" class="pt-24 pb-20 px-6 text-center">
            <h2 class="animate__animated animate__fadeInDown text-5xl md:text-7xl font-bold mb-6 heading-font">
                Trade Like <span class="red-text">ELITE</span>
            </h2>
            <p class="animate__animated animate__fadeInUp text-gray-600 text-lg max-w-2xl mx-auto mb-10 font-medium">
                Get accurate Crypto Signals every day. Maximize your profits with our VIP community.
            </p>
            <div class="flex flex-col md:flex-row justify-center gap-6">
                <a href="#offers" class="simple-card px-12 py-5 rounded-xl text-xl font-bold heading-font bg-gradient-to-r from-yellow-400 to-orange-500 text-white">
                    <i class="fas fa-gift mr-3"></i>SPECIAL OFFERS
                </a>
                <a href="#signals" class="btn-simple px-12 py-5 rounded-xl text-xl font-bold heading-font">FREE SIGNALS</a>
                <a href="#pricing" class="simple-card px-12 py-5 rounded-xl text-xl font-bold border-red-300 border hover:border-red-500 transition heading-font red-text">VIP PLANS</a>
            </div>
        </section>

        <!-- Special Offers Section - AUTO UPDATED FROM ADMIN -->
        <section id="offers" class="offers-section px-6 py-16">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-4xl font-bold mb-10 flex items-center gap-3 heading-font text-center">
                    <span class="w-4 h-10 bg-yellow-500 rounded-full"></span> 
                    <span class="text-yellow-600">LATEST VIP OFFERS</span>
                    <span class="text-xs bg-red-100 text-red-800 px-3 py-1 rounded-full animate-pulse" id="new-offers-badge" style="display: none;">NEW!</span>
                </h3>
                
                <div id="offers-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Offers will be AUTO-LOADED from Firebase -->
                    <div class="text-center py-12 col-span-full">
                        <div class="loading-spinner" style="margin: 0 auto 20px;"></div>
                        <p class="text-gray-600">Loading offers...</p>
                    </div>
                </div>

                <div class="mt-12 text-center">
                    <p class="text-gray-600 mb-6">Want to receive exclusive offers directly?</p>
                    <button class="btn-modern" id="subscribe-offers-btn">
                        <i class="fas fa-bell"></i>
                        SUBSCRIBE FOR OFFERS
                    </button>
                </div>
            </div>
        </section>

        <!-- Announcements Section -->
        <section id="announcements" class="px-6 py-12 bg-gray-50">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-3xl font-bold mb-6 heading-font">
                    <i class="fas fa-bullhorn mr-3 red-text"></i>Latest Announcements
                </h3>
                <div id="announcements-container" class="space-y-4">
                    <!-- Announcements will be loaded from Firebase -->
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-newspaper text-4xl mb-4"></i>
                        <p>No announcements yet. Check back soon!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Free Signals Section -->
        <section id="signals" class="px-6 py-16 max-w-6xl mx-auto">
            <h3 class="text-4xl font-bold mb-10 flex items-center gap-3 heading-font">
                <span class="w-4 h-10 bg-red-600 rounded-full"></span> 
                <span class="red-text">FREE TRADING SIGNALS</span>
            </h3>
            
            <!-- Signals Table -->
            <div class="signals-table-container">
                <table class="results-table" id="freeSignalsTable">
                    <thead>
                        <tr>
                            <th>Pair</th>
                            <th>Type</th>
                            <th>Entry Price</th>
                            <th>Stop Loss</th>
                            <th>Take Profit</th>
                            <th>Leverage</th>
                            <th>Status</th>
                            <th>Profit/Loss</th>
                        </tr>
                    </thead>
                    <tbody id="signalsTableBody">
                        <!-- Signals will be loaded from Firebase -->
                        <tr>
                            <td colspan="8" class="text-center py-8 text-gray-500">
                                Loading signals...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- VIP Results Section -->
        <section id="results" class="section-bg px-6 py-16">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-4xl font-bold mb-10 flex items-center gap-3 heading-font">
                    <span class="w-4 h-10 bg-red-600 rounded-full"></span> 
                    <span class="red-text">VIP MEMBERS RESULTS</span>
                </h3>
                
                <div id="results-content">
                    <!-- This will show locked message or results based on login status -->
                    <div class="results-locked">
                        <div class="locked-overlay">
                            <div class="lock-icon">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3 heading-font">VIP Results Locked</h3>
                            <p class="text-gray-600 mb-6 max-w-md">
                                You need to login to view our monthly VIP trading results and performance statistics.
                            </p>
                            <div class="flex gap-3">
                                <button class="btn-simple" id="results-login-btn">
                                    <i class="fas fa-sign-in-alt"></i>
                                    Login to View
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="px-6 py-16">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-4xl font-bold mb-12 text-center heading-font">
                    <span class="red-text">VIP MEMBERSHIP</span> PLANS
                </h3>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="simple-card p-8 text-center">
                        <h4 class="text-2xl font-bold mb-4 text-gray-800 heading-font">1 Month</h4>
                        <div class="text-4xl font-bold mb-6 red-text">$10<span class="text-lg text-gray-500">/month</span></div>
                        <ul class="space-y-3 text-gray-600 mb-8">
                            <li class="flex items-center justify-center gap-2"> 3 Daily Signals</li>
                            <li class="flex items-center justify-center gap-2"> Basic Support</li>
                            <li class="flex items-center justify-center gap-2"> Weekly Analysis</li>
                        </ul>
                        <button class="btn-simple w-full py-3 rounded-lg">GET STARTED</button>
                    </div>
                    
                    <div class="simple-card p-8 text-center border-2 border-red-300 relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-red-600 text-white px-4 py-1 rounded-full text-sm font-bold">MOST POPULAR</span>
                        </div>
                        <h4 class="text-2xl font-bold mb-4 red-text heading-font">LifeTime</h4>
                        <div class="text-4xl font-bold mb-6 red-text">$50<span class="text-lg text-gray-500">/month</span></div>
                        <ul class="space-y-3 text-gray-600 mb-8">
                            <li class="flex items-center justify-center gap-2"> Unlimited Signals</li>
                            <li class="flex items-center justify-center gap-2"> 24/7 Priority Support</li>
                            <li class="flex items-center justify-center gap-2"> Real-time Alerts</li>
                            <li class="flex items-center justify-center gap-2"> Risk Management</li>
                            <li class="flex items-center justify-center gap-2"> Portfolio Management</li>
                            <li class="flex items-center justify-center gap-2"> Early Access Signals</li>
                        </ul>
                        <button class="btn-simple w-full py-3 rounded-lg">JOIN NOW</button>
                    </div>
                    
                    <div class="simple-card p-8 text-center">
                        <h4 class="text-2xl font-bold mb-4 text-gray-800 heading-font">3 Months</h4>
                        <div class="text-4xl font-bold mb-6 red-text">$15<span class="text-lg text-gray-500">/month</span></div>
                        <ul class="space-y-3 text-gray-600 mb-8">
                            <li class="flex items-center justify-center gap-2"> 8-10 Daily Signals</li>
                            <li class="flex items-center justify-center gap-2"> A to Z Coaching</li>
                            <li class="flex items-center justify-center gap-2"> Early Access Signals</li>
                        </ul>
                        <button class="btn-simple w-full py-3 rounded-lg">BECOME ELITE</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section-bg px-6 py-16">
            <div class="max-w-6xl mx-auto">
                <h3 class="text-4xl font-bold mb-10 text-center heading-font">
                    <span class="red-text">ABOUT</span> US
                </h3>
                <div class="simple-card p-8">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-2xl font-bold mb-4 heading-font">Who We Are</h4>
                            <p class="text-gray-600 mb-4">
                                SM VIP SIGNALS is a premium crypto trading signals provider with over 5 years of experience in the cryptocurrency markets.
                            </p>
                            <p class="text-gray-600 mb-4">
                                Our team consists of professional traders and analysts who provide accurate trading signals for Bitcoin, Ethereum, and other major cryptocurrencies.
                            </p>
                        </div>
                        <div>
                            <h4 class="text-2xl font-bold mb-4 heading-font">Our Mission</h4>
                            <p class="text-gray-600 mb-4">
                                To help traders maximize their profits with high-quality, accurate trading signals and comprehensive market analysis.
                            </p>
                            <p class="text-gray-600">
                                We provide real-time signals, risk management strategies, and 24/7 support to our VIP members.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
<footer class="simple-footer">
    <div class="footer-container">
        <div class="footer-grid">
            <div>
                <div class="footer-logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <span class="logo-text">SM VIP SIGNALS</span>
                </div>
                <p class="footer-description">
                    Premium crypto trading signals with proven results. Join our VIP community for accurate daily signals, market analysis, and professional trading guidance.
                </p>
                <div class="social-links">
                    <a href="https://www.facebook.com/share/1B2M56GifP/?mibextid=wwXIfrFb" target="_blank" class="social-link">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/mashsolutions26?igsh=MTJteW43ZDlqYXR0YQ==" target="_blank" class="social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://t.me/smvipsignals" target="_blank" class="social-link">
                        <i class="fab fa-telegram"></i>
                    </a>
                    <a href="https://wa.me/94771234567" target="_blank" class="social-link">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
            
            <div>
                <h4 class="footer-heading">Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="#home" class="footer-link">Home</a></li>
                    <li><a href="#offers" class="footer-link">Special Offers</a></li>
                    <li><a href="#signals" class="footer-link">Free Signals</a></li>
                    <li><a href="#pricing" class="footer-link">VIP Plans</a></li>
                    <li><a href="#about" class="footer-link">About Us</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="footer-heading">VIP Services</h4>
                <ul class="footer-links">
                    <li><a href="#results" class="footer-link">Performance Results</a></li>
                    <li><a href="#announcements" class="footer-link">Announcements</a></li>
                    <li><a href="#" class="footer-link">Market Analysis</a></li>
                    <li><a href="#" class="footer-link">Risk Management</a></li>
                    <li><a href="#" class="footer-link">24/7 Support</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="footer-heading">Contact Info</h4>
                <ul class="footer-links" style="list-style: none;">
                    <li><i class="fas fa-envelope"></i> thevichare1@gmail.com</li>
                    <li><i class="fab fa-whatsapp"></i> +94 72 178 7970</li>
                    <li><i class="fab fa-telegram"></i> @SMVIP_SIGNAL</li>
                    <li><i class="fas fa-clock"></i> Support: 24/7</li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2026 SM VIP SIGNALS. All rights reserved. | Designed By <a href="https://wa.me/94750700961" target="_blank">MASH SOLUTIONS</a></p>
            <p class="text-xs text-gray-400 mt-2">Disclaimer: Trading cryptocurrencies involves risk. Past performance does not guarantee future results.</p>
        </div>
    </div>
</footer>
    </div>

    <!-- JavaScript remains exactly the same -->
    <script>
        // Main Application JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded and parsed');
            
            // DOM Elements
            const loadingScreen = document.getElementById('loading-screen');
            const mainWebsite = document.getElementById('main-website');
            const progressFill = document.getElementById('progress-fill');
            const loadingText = document.getElementById('loading-text');
            
            // Navigation Elements
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileNav = document.getElementById('mobile-nav');
            const notificationBtn = document.getElementById('notification-btn');
            const notificationDropdown = document.getElementById('notification-dropdown');
            
            // Glassmorphism Account Elements
            const glassAccountIcon = document.getElementById('glass-account-icon');
            const glassDropdown = document.getElementById('glass-dropdown');
            const glassLoginBtn = document.getElementById('glass-login-btn');
            const glassLogoutBtn = document.getElementById('glass-logout-btn');
            const glassRenewVip = document.getElementById('glass-renew-vip');
            
            // Modal Elements
            const loginModal = document.getElementById('loginModal');
            const loginTabBtn = document.getElementById('loginTabBtn');
            const registerTabBtn = document.getElementById('registerTabBtn');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const switchToRegister = document.getElementById('switchToRegister');
            const switchToLogin = document.getElementById('switchToLogin');
            const closeLoginBtn = document.getElementById('closeLogin');
            const closeRegisterBtn = document.getElementById('closeRegister');
            
            // Login Form Elements
            const loginSubmitBtn = document.getElementById('loginSubmit');
            const loginUsernameInput = document.getElementById('loginUsername');
            const loginPasswordInput = document.getElementById('loginPassword');
            
            // Register Form Elements
            const registerSubmitBtn = document.getElementById('registerSubmit');
            const registerUsernameInput = document.getElementById('registerUsername');
            const registerEmailInput = document.getElementById('registerEmail');
            const registerPasswordInput = document.getElementById('registerPassword');
            const registerConfirmPasswordInput = document.getElementById('registerConfirmPassword');
            const registerWhatsAppInput = document.getElementById('registerWhatsApp');
            
            // Offers Elements
            const offersContainer = document.getElementById('offers-container');
            const subscribeOffersBtn = document.getElementById('subscribe-offers-btn');
            const newOffersBadge = document.getElementById('new-offers-badge');
            
            // Announcements Elements
            const announcementsContainer = document.getElementById('announcements-container');
            
            // Buttons
            const joinVipBtn = document.getElementById('join-vip-btn');
            const mobileJoinVipBtn = document.getElementById('mobile-join-vip-btn');
            const mobileLoginBtn = document.getElementById('mobile-login-btn');
            const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
            const resultsLoginBtn = document.getElementById('results-login-btn');
            
            // Results Content
            const resultsContent = document.getElementById('results-content');
            
            // Free Signals Elements
            const signalsTableBody = document.getElementById('signalsTableBody');
            
            // Loading messages
            const loadingMessages = [
                "Preparing premium signals...",
                "Connecting to VIP community...",
                "Loading trading data...",
                "Securing your access...",
                "Entering main trading hub..."
            ];

            // Firebase Database References
            const USERS_DB_REF = 'users';
            const NOTIFICATIONS_DB_REF = 'notifications';
            const OFFERS_DB_REF = 'offers';
            const ANNOUNCEMENTS_DB_REF = 'announcements';
            const SUBSCRIPTIONS_DB_REF = 'subscriptions';
            const RESULTS_DB_REF = 'monthly_results';
            const PACKAGE_SETTINGS_DB_REF = 'package_settings';
            const FREE_SIGNALS_DB_REF = 'free_signals';
            
            // Application State
            let currentUser = null;
            let notifications = [];
            let offers = [];
            let announcements = [];
            let freeSignals = [];
            let lastOfferUpdateTime = 0;
            let lastSignalUpdate = 0;

            // Firebase Functions
            function initializeFirebase() {
                if (!window.firebaseDatabase) {
                    console.log('Firebase not initialized - using fallback mode');
                    return false;
                }
                return true;
            }

            // Glassmorphism Account Functions
            function initializeGlassmorphismAccount() {
                if (glassAccountIcon) {
                    glassAccountIcon.addEventListener('click', function(e) {
                        e.stopPropagation();
                        glassDropdown.classList.toggle('active');
                        notificationDropdown.classList.remove('active');
                    });
                }
                
                if (glassLoginBtn) {
                    glassLoginBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        openLoginModal('login');
                        glassDropdown.classList.remove('active');
                    });
                }
                
                if (glassLogoutBtn) {
                    glassLogoutBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        logout();
                        glassDropdown.classList.remove('active');
                    });
                }
                
                if (glassRenewVip) {
                    glassRenewVip.addEventListener('click', function() {
                        window.location.href = '#pricing';
                        glassDropdown.classList.remove('active');
                    });
                }
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (glassAccountIcon && !glassAccountIcon.contains(e.target) && 
                        glassDropdown && !glassDropdown.contains(e.target)) {
                        glassDropdown.classList.remove('active');
                    }
                });
            }

            // Update Glassmorphism UI
            function updateGlassmorphismUI() {
                if (!currentUser) {
                    // Guest state
                    document.getElementById('glass-initials').textContent = 'G';
                    document.getElementById('glass-avatar-large').textContent = 'G';
                    document.getElementById('glass-username').textContent = 'Guest';
                    document.getElementById('glass-email').textContent = 'Login to access VIP features';
                    document.getElementById('glass-status').classList.add('offline');
                    document.getElementById('glass-logout-btn').classList.add('hidden');
                    document.getElementById('glass-login-btn').style.display = 'flex';
                    
                    // Mobile
                    document.getElementById('mobile-glass-initials').textContent = 'G';
                    document.getElementById('mobile-glass-status').classList.add('offline');
                    
                    // Remove VIP styling
                    document.getElementById('glass-account-icon').classList.remove('vip');
                    document.getElementById('mobile-glass-icon').classList.remove('vip');
                    
                } else {
                    // Logged in state
                    const firstLetter = currentUser.username.charAt(0).toUpperCase();
                    document.getElementById('glass-initials').textContent = firstLetter;
                    document.getElementById('glass-avatar-large').textContent = firstLetter;
                    document.getElementById('glass-username').textContent = currentUser.username;
                    document.getElementById('glass-email').textContent = currentUser.email || currentUser.username + '@user.com';
                    document.getElementById('glass-status').classList.remove('offline');
                    document.getElementById('glass-logout-btn').classList.remove('hidden');
                    document.getElementById('glass-login-btn').style.display = 'none';
                    
                    // Mobile
                    document.getElementById('mobile-glass-initials').textContent = firstLetter;
                    document.getElementById('mobile-glass-status').classList.remove('offline');
                    
                    // Add VIP styling if user is VIP
                    if (currentUser.isVIP) {
                        document.getElementById('glass-account-icon').classList.add('vip');
                        document.getElementById('mobile-glass-icon').classList.add('vip');
                        
                        if (currentUser.vipExpiry) {
                            const daysRemaining = calculateDaysRemaining(currentUser.vipExpiry);
                            document.getElementById('glass-vip-timer').classList.remove('hidden');
                            document.getElementById('glass-vip-days').textContent = daysRemaining;
                        }
                    } else {
                        document.getElementById('glass-account-icon').classList.remove('vip');
                        document.getElementById('mobile-glass-icon').classList.remove('vip');
                        document.getElementById('glass-vip-timer').classList.add('hidden');
                    }
                }
            }

            // Load Free Signals from Firebase
            async function loadFreeSignals() {
                if (!initializeFirebase()) {
                    freeSignals = getDefaultFreeSignals();
                    displayFreeSignals();
                    return;
                }

                try {
                    const signalsRef = window.firebaseRef(window.firebaseDatabase, FREE_SIGNALS_DB_REF);
                    const snapshot = await window.firebaseGet(signalsRef);
                    
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        freeSignals = Object.values(data).filter(signal => 
                            signal.isActive && (!signal.expiresAt || new Date(signal.expiresAt) > new Date())
                        );
                        
                        freeSignals.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    } else {
                        freeSignals = getDefaultFreeSignals();
                    }
                    
                    displayFreeSignals();
                } catch (error) {
                    console.error('Error loading free signals:', error);
                    freeSignals = getDefaultFreeSignals();
                    displayFreeSignals();
                }
            }

            // Get Default Free Signals (fallback)
            function getDefaultFreeSignals() {
                return [
                    {
                        id: 'signal1',
                        pair: 'BTC/USDT',
                        type: 'LONG',
                        entryPrice: '$67,200',
                        stopLoss: '$65,000',
                        takeProfit: '$70,500',
                        leverage: '20x',
                        status: 'active',
                        profitLoss: '+3.2%',
                        createdAt: new Date().toISOString(),
                        expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
                        isActive: true,
                        postedBy: 'Admin'
                    },
                    {
                        id: 'signal2',
                        pair: 'ETH/USDT',
                        type: 'SHORT',
                        entryPrice: '$3,250',
                        stopLoss: '$3,400',
                        takeProfit: '$3,000',
                        leverage: '15x',
                        status: 'active',
                        profitLoss: '+2.8%',
                        createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
                        expiresAt: new Date(Date.now() + 22 * 60 * 60 * 1000).toISOString(),
                        isActive: true,
                        postedBy: 'Admin'
                    }
                ];
            }

            // Display Free Signals
            function displayFreeSignals() {
                if (!signalsTableBody) return;
                
                signalsTableBody.innerHTML = '';
                
                if (freeSignals.length === 0) {
                    signalsTableBody.innerHTML = `
                        <tr>
                            <td colspan="8" class="text-center py-8 text-gray-500">
                                No free signals available at the moment.
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                freeSignals.forEach(signal => {
                    const row = document.createElement('tr');
                    
                    let statusClass = 'status-pending';
                    let statusText = 'Pending';
                    
                    if (signal.status === 'active') {
                        statusClass = 'status-active';
                        statusText = 'Active';
                    } else if (signal.status === 'expired') {
                        statusClass = 'status-expired';
                        statusText = 'Expired';
                    }
                    
                    let profitClass = 'profit-up';
                    if (signal.profitLoss.startsWith('-')) {
                        profitClass = 'profit-down';
                    }
                    
                    row.innerHTML = `
                        <td class="font-bold">${signal.pair}</td>
                        <td>
                            <span class="${signal.type === 'LONG' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} px-3 py-1 rounded-full text-xs font-bold">
                                ${signal.type}
                            </span>
                        </td>
                        <td class="font-medium">${signal.entryPrice}</td>
                        <td class="font-medium text-red-600">${signal.stopLoss}</td>
                        <td class="font-medium text-green-600">${signal.takeProfit}</td>
                        <td class="font-bold">${signal.leverage}</td>
                        <td>
                            <span class="profit-badge ${statusClass}">${statusText}</span>
                        </td>
                        <td class="font-bold ${profitClass}">${signal.profitLoss}</td>
                    `;
                    
                    signalsTableBody.appendChild(row);
                });
            }

            // Load Announcements from Firebase
            async function loadAnnouncements() {
                if (!initializeFirebase()) {
                    announcements = getDefaultAnnouncements();
                    displayAnnouncements();
                    return;
                }

                try {
                    const announcementsRef = window.firebaseRef(window.firebaseDatabase, ANNOUNCEMENTS_DB_REF);
                    const snapshot = await window.firebaseGet(announcementsRef);
                    
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        announcements = Object.entries(data)
                            .map(([key, value]) => ({ key, ...value }))
                            .filter(announcement => 
                                announcement.isActive !== false && 
                                (!announcement.expiresAt || new Date(announcement.expiresAt) > new Date())
                            )
                            .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                    } else {
                        announcements = getDefaultAnnouncements();
                    }
                    
                    displayAnnouncements();
                } catch (error) {
                    console.error('Error loading announcements:', error);
                    announcements = getDefaultAnnouncements();
                    displayAnnouncements();
                }
            }

            // Get Default Announcements (fallback)
            function getDefaultAnnouncements() {
                return [
                    {
                        key: '1',
                        title: 'Welcome to SM VIP SIGNALS',
                        message: 'Welcome to our premium trading community. Start your journey with our free signals and upgrade to VIP for exclusive benefits.',
                        priority: 'normal',
                        timestamp: new Date().toISOString(),
                        postedBy: 'Admin',
                        isActive: true
                    }
                ];
            }

            // Display Announcements
            function displayAnnouncements() {
                if (!announcementsContainer) return;
                
                announcementsContainer.innerHTML = '';
                
                if (announcements.length === 0) {
                    announcementsContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            <i class="fas fa-newspaper text-4xl mb-4"></i>
                            <p>No announcements yet. Check back soon!</p>
                        </div>
                    `;
                    return;
                }
                
                announcements.forEach(announcement => {
                    const announcementElement = document.createElement('div');
                    let priorityClass = 'border-l-4 border-blue-500 bg-blue-50';
                    let badgeClass = 'bg-blue-100 text-blue-800';
                    
                    if (announcement.priority === 'urgent') {
                        priorityClass = 'border-l-4 border-red-500 bg-red-50';
                        badgeClass = 'bg-red-100 text-red-800';
                    } else if (announcement.priority === 'important') {
                        priorityClass = 'border-l-4 border-yellow-500 bg-yellow-50';
                        badgeClass = 'bg-yellow-100 text-yellow-800';
                    }
                    
                    const date = new Date(announcement.timestamp);
                    const formattedDate = date.toLocaleDateString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    announcementElement.className = `p-4 rounded-lg ${priorityClass}`;
                    announcementElement.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="text-lg font-bold text-gray-900">${announcement.title}</h4>
                            <span class="px-2 py-1 text-xs rounded-full ${badgeClass}">
                                ${announcement.priority}
                            </span>
                        </div>
                        <p class="text-gray-700 mb-3">${announcement.message}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">
                                <i class="fas fa-clock mr-1"></i>${formattedDate}
                            </span>
                            <span class="text-sm text-gray-600">
                                <i class="fas fa-user mr-1"></i>${announcement.postedBy || 'Admin'}
                            </span>
                        </div>
                    `;
                    
                    announcementsContainer.appendChild(announcementElement);
                });
            }

            // Load Notifications from Firebase
            async function loadNotifications() {
                if (!initializeFirebase()) {
                    notifications = getDefaultNotifications();
                    initNotifications();
                    return;
                }

                try {
                    const notificationsRef = window.firebaseRef(window.firebaseDatabase, NOTIFICATIONS_DB_REF);
                    const snapshot = await window.firebaseGet(notificationsRef);
                    
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        notifications = Object.values(data).filter(notification => 
                            notification.isActive && (!notification.expiresAt || new Date(notification.expiresAt) > new Date())
                        );
                        
                        notifications.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    } else {
                        notifications = getDefaultNotifications();
                    }
                    
                    initNotifications();
                    updateNotificationBadge();
                } catch (error) {
                    console.error('Error loading notifications:', error);
                    notifications = getDefaultNotifications();
                    initNotifications();
                }
            }

            // Load Offers from Firebase - AUTO UPDATED
            async function loadOffers() {
                if (!initializeFirebase()) {
                    offers = getDefaultOffers();
                    displayOffers();
                    return;
                }

                try {
                    const offersRef = window.firebaseRef(window.firebaseDatabase, OFFERS_DB_REF);
                    const snapshot = await window.firebaseGet(offersRef);
                    
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        
                        // Filter active offers
                        const newOffers = Object.values(data).filter(offer => 
                            offer.isActive && (!offer.expiresAt || new Date(offer.expiresAt) > new Date())
                        );
                        
                        // Sort by featured first, then by expiry date
                        newOffers.sort((a, b) => {
                            if (a.featured && !b.featured) return -1;
                            if (!a.featured && b.featured) return 1;
                            if (a.expiresAt && b.expiresAt) {
                                return new Date(a.expiresAt) - new Date(b.expiresAt);
                            }
                            return 0;
                        });
                        
                        // Check for new offers
                        const currentTime = Date.now();
                        const newOfferCount = newOffers.filter(offer => 
                            offer.createdAt && new Date(offer.createdAt).getTime() > lastOfferUpdateTime
                        ).length;
                        
                        if (newOfferCount > 0 && lastOfferUpdateTime > 0) {
                            showToast(` ${newOfferCount} new offer${newOfferCount > 1 ? 's' : ''} available!`, 'info');
                            newOffersBadge.style.display = 'inline-block';
                            setTimeout(() => {
                                newOffersBadge.style.display = 'none';
                            }, 5000);
                        }
                        
                        lastOfferUpdateTime = currentTime;
                        offers = newOffers;
                    } else {
                        offers = getDefaultOffers();
                    }
                    
                    displayOffers();
                } catch (error) {
                    console.error('Error loading offers:', error);
                    offers = getDefaultOffers();
                    displayOffers();
                }
            }

            // Get Default Notifications (fallback)
            function getDefaultNotifications() {
                return [
                    {
                        id: '1',
                        title: 'New VIP Offer Available!',
                        message: 'Get 50% discount on PRO plan for first month',
                        type: 'offer',
                        createdAt: new Date().toISOString(),
                        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                        isActive: true,
                        unread: true,
                        icon: 'fa-gift',
                        iconColor: 'bg-yellow-100 text-yellow-600',
                        link: '#offers'
                    }
                ];
            }

            // Get Default Offers (fallback)
            function getDefaultOffers() {
                const now = new Date();
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const nextWeek = new Date(now);
                nextWeek.setDate(nextWeek.getDate() + 7);

                return [
                    {
                        id: 'offer1',
                        title: 'New Member Special',
                        description: '50% OFF on your first VIP subscription',
                        originalPrice: 299,
                        offerPrice: 149.50,
                        discount: 50,
                        features: [
                            '8-10 Daily Signals',
                            '24/7 Priority Support',
                            'Real-time Alerts',
                            'Risk Management',
                            '1 Month VIP Access'
                        ],
                        expiresAt: tomorrow.toISOString(),
                        isActive: true,
                        featured: true,
                        buttonText: 'CLAIM 50% OFF',
                        whatsappMessage: 'Hi, I want to claim the 50% OFF New Member Special offer for VIP subscription.',
                        createdAt: new Date().toISOString(),
                        createdBy: 'Admin'
                    }
                ];
            }

            // Display Offers - AUTO UPDATED FROM ADMIN
            function displayOffers() {
                if (!offersContainer) return;
                
                offersContainer.innerHTML = '';
                
                if (offers.length === 0) {
                    offersContainer.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <div class="text-gray-400 text-6xl mb-4">
                                <i class="fas fa-gift"></i>
                            </div>
                            <h4 class="text-xl font-bold text-gray-600 mb-2">No Active Offers</h4>
                            <p class="text-gray-500">Check back later for special promotions!</p>
                        </div>
                    `;
                    return;
                }
                
                offers.forEach((offer, index) => {
                    const offerElement = document.createElement('div');
                    offerElement.className = `offer-card ${offer.featured ? 'featured' : ''}`;
                    
                    // Calculate time remaining
                    let timeRemaining = '';
                    let countdownHtml = '';
                    let isExpired = false;
                    
                    if (offer.expiresAt) {
                        const expires = new Date(offer.expiresAt);
                        const now = new Date();
                        const diff = expires - now;
                        
                        if (diff > 0) {
                            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                            
                            timeRemaining = `Expires in: ${days}d ${hours}h ${minutes}m`;
                            
                            countdownHtml = `
                                <div class="offer-timer">
                                    <i class="fas fa-clock"></i>
                                    <div class="timer-numbers">
                                        ${days.toString().padStart(2, '0')}:${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}
                                    </div>
                                </div>
                            `;
                        } else {
                            timeRemaining = 'Offer Expired';
                            isExpired = true;
                        }
                    }
                    
                    // Format features list
                    const featuresList = Array.isArray(offer.features) ? 
                        offer.features : 
                        (offer.features || '').split('\n').filter(f => f.trim());
                    
                    offerElement.innerHTML = `
                        ${offer.featured ? '<div class="offer-badge">FEATURED</div>' : ''}
                        <div class="offer-header">
                            <h4 class="text-xl font-bold">${offer.title}</h4>
                            <p class="text-sm opacity-90 mt-1">${offer.description}</p>
                            ${countdownHtml}
                        </div>
                        <div class="offer-body">
                            <div class="offer-price">
                                ${offer.offerPrice === 0 ? 'FREE' : `$${offer.offerPrice}`}
                                ${offer.originalPrice > offer.offerPrice ? 
                                    `<span class="text-sm line-through text-gray-500 ml-2">$${offer.originalPrice}</span>` : 
                                    ''}
                            </div>
                            
                            <ul class="offer-features">
                                ${featuresList.map(feature => `
                                    <li><i class="fas fa-check-circle"></i> ${feature}</li>
                                `).join('')}
                            </ul>
                            
                            <button class="claim-btn ${isExpired ? 'offer-expired' : ''}" 
                                    data-offer-index="${index}"
                                    ${isExpired ? 'disabled' : ''}>
                                <i class="fas fa-${isExpired ? 'clock' : 'gift'}"></i>
                                ${isExpired ? 'OFFER EXPIRED' : (offer.buttonText || 'CLAIM OFFER')}
                            </button>
                            
                            ${timeRemaining ? `<p class="text-center text-sm text-gray-500 mt-3">${timeRemaining}</p>` : ''}
                        </div>
                    `;
                    
                    offersContainer.appendChild(offerElement);
                    
                    // Add click event to claim button
                    const claimBtn = offerElement.querySelector('.claim-btn');
                    if (claimBtn && !isExpired) {
                        claimBtn.addEventListener('click', () => claimOffer(offer));
                    }
                });
            }

            // Claim Offer Function
            function claimOffer(offer) {
                if (!currentUser) {
                    showToast('Please login to claim this offer', 'warning');
                    openLoginModal('login');
                    return;
                }
                
                // Get WhatsApp number
                let whatsappNumber = '94777777777'; // Default number
                
                if (currentUser && currentUser.whatsapp) {
                    whatsappNumber = currentUser.whatsapp.replace('+', '');
                }
                
                // Create WhatsApp message
                const whatsappMessage = offer.whatsappMessage || 
                    `Hi, I want to claim the ${offer.title} offer for VIP signals.`;
                
                const encodedMessage = encodeURIComponent(whatsappMessage);
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
                
                // Open WhatsApp
                window.open(whatsappUrl, '_blank');
                
                // Show success message
                showToast(`Offer claimed! Opening WhatsApp to complete your request.`, 'success');
                
                // Track offer claim in Firebase
                if (initializeFirebase()) {
                    const claimData = {
                        userId: currentUser.username,
                        offerId: offer.title || 'unknown',
                        claimedAt: new Date().toISOString(),
                        userWhatsApp: currentUser.whatsapp || 'not provided',
                        offerTitle: offer.title,
                        offerPrice: offer.offerPrice,
                        status: 'pending'
                    };
                    
                    const claimRef = window.firebaseRef(window.firebaseDatabase, 
                        `offer_claims/${currentUser.username}_${Date.now()}`);
                    window.firebaseSet(claimRef, claimData).catch(error => {
                        console.error('Error tracking offer claim:', error);
                    });
                }
            }

            // Initialize Notifications
            function initNotifications() {
                const notificationList = document.getElementById('notification-list');
                if (!notificationList) return;
                
                notificationList.innerHTML = '';
                
                if (notifications.length === 0) {
                    notificationList.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-bell-slash text-gray-300 text-3xl mb-3"></i>
                            <p class="text-gray-500">No notifications yet</p>
                        </div>
                    `;
                    return;
                }
                
                notifications.forEach(notification => {
                    const notificationItem = document.createElement('div');
                    notificationItem.className = `notification-item ${notification.type} ${notification.unread ? 'unread' : ''}`;
                    
                    let icon = 'fa-bell';
                    let iconColor = 'bg-gray-100 text-gray-600';
                    
                    if (notification.type === 'offer') {
                        icon = 'fa-gift';
                        iconColor = 'bg-yellow-100 text-yellow-600';
                    } else if (notification.type === 'signal') {
                        icon = 'fa-chart-line';
                        iconColor = 'bg-green-100 text-green-600';
                    } else if (notification.type === 'urgent') {
                        icon = 'fa-exclamation-triangle';
                        iconColor = 'bg-red-100 text-red-600';
                    }
                    
                    notificationItem.innerHTML = `
                        <div class="flex items-start gap-3">
                            <div class="notification-icon ${iconColor}">
                                <i class="fas ${notification.icon || icon}"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">${notification.title}</p>
                                <p class="text-sm text-gray-600 mt-1">${notification.message}</p>
                                <p class="text-xs text-gray-500 mt-2">${formatTimeAgo(new Date(notification.createdAt))}</p>
                            </div>
                            ${notification.unread ? '<div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>' : ''}
                            ${notification.type === 'offer' ? '<span class="offer-badge">OFFER</span>' : ''}
                        </div>
                    `;
                    
                    notificationItem.addEventListener('click', () => {
                        notification.unread = false;
                        updateNotificationBadge();
                        
                        if (notification.link) {
                            window.location.hash = notification.link;
                        }
                        
                        notificationDropdown.classList.remove('active');
                    });
                    
                    notificationList.appendChild(notificationItem);
                });
            }

            // Format time ago
            function formatTimeAgo(date) {
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                
                if (diffMins < 1) return 'Just now';
                if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
                if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
                if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
                
                return date.toLocaleDateString();
            }

            // Update Notification Badge
            function updateNotificationBadge() {
                const unreadCount = notifications.filter(n => n.unread).length;
                document.getElementById('notification-count').textContent = unreadCount;
                document.querySelectorAll('.badge-count').forEach(badge => {
                    badge.textContent = unreadCount;
                });
            }

            // Check if user is logged in
            function checkLoginStatus() {
                const userData = localStorage.getItem('current_user');
                if (userData) {
                    try {
                        currentUser = JSON.parse(userData);
                        updateUIForLoggedInUser();
                        loadResultsContent();
                    } catch (e) {
                        console.error('Error parsing user data:', e);
                        localStorage.removeItem('current_user');
                        loadResultsContent();
                    }
                } else {
                    loadResultsContent();
                }
            }

            // Test VIP Users
            const TEST_VIP_USERS = {
                'vipuser1': { 
                    password: 'SMVIP@2024#001', 
                    email: 'vipuser1@example.com',
                    whatsapp: '+94771234567',
                    isVIP: true,
                    vipExpiry: '2024-12-31',
                    phoneVerified: true
                }
            };

function login(username, password) {
    console.log('Login attempt:', username, password); // Debug log
    
    // First check test users
    if (TEST_VIP_USERS[username]) {
        console.log('Test user found:', TEST_VIP_USERS[username].password); // Debug log
        
        if (TEST_VIP_USERS[username].password === password) {
            currentUser = {
                username: username,
                ...TEST_VIP_USERS[username]
            };
            
            localStorage.setItem('current_user', JSON.stringify(currentUser));
            
            updateUIForLoggedInUser();
            loadResultsContent();
            
            closeLoginModal();
            
            showToast(`Welcome back, ${username}!`, 'success');
            
            return true;
        } else {
            console.log('Password mismatch'); // Debug log
            showToast('Invalid password for test user', 'error');
            return false;
        }
    }
    
    // Try Firebase if not test user
    try {
        if (window.firebaseDatabase) {
            const userRef = window.firebaseRef(window.firebaseDatabase, `${USERS_DB_REF}/${username}`);
            return window.firebaseGet(userRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    console.log('Firebase user data:', userData); // Debug log
                    
                    if (userData.password === password) {
                        currentUser = {
                            username: username,
                            ...userData
                        };
                        
                        localStorage.setItem('current_user', JSON.stringify(currentUser));
                        updateUIForLoggedInUser();
                        loadResultsContent();
                        closeLoginModal();
                        showToast(`Welcome back, ${username}!`, 'success');
                        return true;
                    } else {
                        showToast('Invalid username or password', 'error');
                        return false;
                    }
                } else {
                    showToast('User not found', 'error');
                    return false;
                }
            }).catch((error) => {
                console.error('Firebase login error:', error);
                showToast('Login error. Please try again.', 'error');
                return false;
            });
        }
    } catch (error) {
        console.error('Login error:', error);
        showToast('Login failed. Please try again.', 'error');
        return false;
    }
    
    // If no test user and no Firebase
    showToast('Invalid username or password', 'error');
    return false;
}

            // Register Function (NO PHONE VERIFICATION)
            function register(username, email, password, confirmPassword, whatsapp) {
                if (!username || !email || !password || !confirmPassword || !whatsapp) {
                    showToast('Please fill all fields', 'error');
                    return false;
                }
                
                // Password validation
                if (password.length < 8) {
                    showToast('Password must be at least 8 characters long', 'error');
                    return false;
                }
                
                if (password !== confirmPassword) {
                    showToast('Passwords do not match', 'error');
                    return false;
                }
                
                const cleanedWhatsApp = whatsapp.replace(/\D/g, '');
                if (cleanedWhatsApp.length !== 10) {
                    showToast('Please enter a valid 10-digit WhatsApp number', 'error');
                    return false;
                }
                
                const formattedWhatsApp = '+94' + cleanedWhatsApp;
                
                // Check if username already exists in test users
                if (TEST_VIP_USERS[username]) {
                    showToast('Username already exists', 'error');
                    return false;
                }
                
                // Create user object
                const newUser = {
                    username: username,
                    email: email,
                    password: password, // User's chosen password
                    whatsapp: formattedWhatsApp,
                    isVIP: false,
                    registeredDate: new Date().toISOString().split('T')[0],
                    phoneVerified: true, // Direct registration, no phone verification needed
                    registrationDate: new Date().toISOString()
                };
                
                // Save to Firebase if available
                if (initializeFirebase()) {
                    const userRef = window.firebaseRef(window.firebaseDatabase, `${USERS_DB_REF}/${username}`);
                    window.firebaseGet(userRef).then((snapshot) => {
                        if (snapshot.exists()) {
                            showToast('Username already exists', 'error');
                            return false;
                        } else {
                            window.firebaseSet(userRef, newUser).then(() => {
                                // Successfully saved to Firebase
                                currentUser = newUser;
                                localStorage.setItem('current_user', JSON.stringify(currentUser));
                                
                                updateUIForLoggedInUser();
                                loadResultsContent();
                                closeLoginModal();
                                
                                // Send welcome WhatsApp message
                                sendWelcomeWhatsApp(newUser.whatsapp, newUser.username);
                                
                                showToast('Registration successful! Welcome to SM VIP SIGNALS.', 'success');
                                return true;
                            }).catch((error) => {
                                console.error('Firebase registration error:', error);
                                // Save locally if Firebase fails
                                currentUser = newUser;
                                localStorage.setItem('current_user', JSON.stringify(currentUser));
                                
                                updateUIForLoggedInUser();
                                loadResultsContent();
                                closeLoginModal();
                                
                                sendWelcomeWhatsApp(newUser.whatsapp, newUser.username);
                                
                                showToast('Registration successful (offline mode)', 'success');
                                return true;
                            });
                        }
                    }).catch((error) => {
                        console.error('Firebase check error:', error);
                        // Save locally
                        currentUser = newUser;
                        localStorage.setItem('current_user', JSON.stringify(currentUser));
                        
                        updateUIForLoggedInUser();
                        loadResultsContent();
                        closeLoginModal();
                        
                        sendWelcomeWhatsApp(newUser.whatsapp, newUser.username);
                        
                        showToast('Registration successful (offline mode)', 'success');
                        return true;
                    });
                } else {
                    // Firebase not available, save locally
                    currentUser = newUser;
                    localStorage.setItem('current_user', JSON.stringify(currentUser));
                    
                    updateUIForLoggedInUser();
                    loadResultsContent();
                    closeLoginModal();
                    
                    sendWelcomeWhatsApp(newUser.whatsapp, newUser.username);
                    
                    showToast('Registration successful! Welcome to SM VIP SIGNALS.', 'success');
                    return true;
                }
            }

            // Send welcome WhatsApp message
            function sendWelcomeWhatsApp(phoneNumber, username) {
                const message = `Welcome ${username} to SM VIP SIGNALS! \n\nYour account has been successfully created.\n\nStart your trading journey with us!\n\n Login: smvipsignals.com\n\nBest regards,\nSM VIP SIGNALS Team`;
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${phoneNumber.replace('+', '')}?text=${encodedMessage}`;
                
                setTimeout(() => {
                    window.open(whatsappUrl, '_blank');
                }, 3000);
            }

            // Logout Function
            function logout() {
                currentUser = null;
                localStorage.removeItem('current_user');
                updateUIForLoggedOutUser();
                loadResultsContent();
                showToast('Logged out successfully!', 'info');
            }

            // Update UI for logged in user
            function updateUIForLoggedInUser() {
                if (!currentUser) return;
                
                document.getElementById('mobile-profile-name').textContent = currentUser.username;
                document.getElementById('mobile-vip-status').textContent = currentUser.isVIP ? 'VIP Member' : 'Free Member';
                
                const firstLetter = currentUser.username.charAt(0).toUpperCase();
                document.getElementById('mobile-profile-avatar').innerHTML = firstLetter;
                
                if (currentUser.isVIP && currentUser.vipExpiry) {
                    const daysRemaining = calculateDaysRemaining(currentUser.vipExpiry);
                    document.getElementById('mobile-vip-timer').classList.remove('hidden');
                    document.getElementById('mobile-vip-days').textContent = daysRemaining;
                } else {
                    document.getElementById('mobile-vip-timer').classList.add('hidden');
                }
                
                document.getElementById('mobile-logout-btn').classList.remove('hidden');
                document.getElementById('mobile-login-btn').classList.add('hidden');
                
                // Update Glassmorphism UI
                updateGlassmorphismUI();
            }

            // Calculate days remaining
            function calculateDaysRemaining(expiryDate) {
                const now = new Date();
                const expiry = new Date(expiryDate);
                const diffTime = expiry - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays > 0 ? diffDays : 0;
            }

            // Update UI for logged out user
            function updateUIForLoggedOutUser() {
                document.getElementById('mobile-profile-name').textContent = 'Guest';
                document.getElementById('mobile-vip-status').textContent = 'Login to continue';
                
                document.getElementById('mobile-profile-avatar').innerHTML = '<i class="fas fa-user"></i>';
                
                document.getElementById('mobile-vip-timer').classList.add('hidden');
                
                document.getElementById('mobile-login-btn').classList.remove('hidden');
                document.getElementById('mobile-logout-btn').classList.add('hidden');
                
                // Update Glassmorphism UI
                updateGlassmorphismUI();
            }

            // Load Results Content
            function loadResultsContent() {
                if (!currentUser) {
                    resultsContent.innerHTML = `
                        <div class="results-locked">
                            <div class="locked-overlay">
                                <div class="lock-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <h3 class="text-2xl font-bold mb-3 heading-font">VIP Results Locked</h3>
                                <p class="text-gray-600 mb-6 max-w-md">
                                    You need to login to view our monthly VIP trading results and performance statistics.
                                </p>
                                <div class="flex gap-3">
                                    <button class="btn-simple" id="results-login-btn">
                                        <i class="fas fa-sign-in-alt"></i>
                                        Login to View
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        document.getElementById('results-login-btn')?.addEventListener('click', () => {
                            openLoginModal('login');
                        });
                    }, 100);
                    
                } else if (!currentUser.isVIP) {
                    resultsContent.innerHTML = `
                        <div class="results-locked">
                            <div class="locked-overlay">
                                <div class="lock-icon">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <h3 class="text-2xl font-bold mb-3 heading-font">VIP Results Restricted</h3>
                                <p class="text-gray-600 mb-6 max-w-md">
                                    You need to upgrade to VIP membership to view our monthly trading results and performance statistics.
                                </p>
                                <div class="flex gap-3">
                                    <a href="#pricing" class="btn-simple">
                                        <i class="fas fa-crown"></i>
                                        Upgrade to VIP
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                    
                } else {
                    // Show results for VIP users
                    resultsContent.innerHTML = `
                        <div class="simple-card p-8">
                            <div class="flex justify-between items-center mb-6">
                                <h4 class="text-xl font-bold heading-font">Monthly Performance Results</h4>
                                <div class="vip-timer">
                                    <i class="fas fa-crown"></i>
                                    <span>VIP ACCESS</span>
                                </div>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="results-table">
                                    <thead>
                                        <tr>
                                            <th>Month</th>
                                            <th>Total Signals</th>
                                            <th>Win Rate</th>
                                            <th>Total Profit</th>
                                            <th>Best Trade</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="font-medium">January 2024</td>
                                            <td>45</td>
                                            <td><span class="profit-positive profit-badge">89%</span></td>
                                            <td><span class="profit-positive profit-badge">+$12,450</span></td>
                                            <td class="font-medium">BTC/USDT +320%</td>
                                        </tr>
                                        <tr>
                                            <td class="font-medium">December 2023</td>
                                            <td>42</td>
                                            <td><span class="profit-positive profit-badge">86%</span></td>
                                            <td><span class="profit-positive profit-badge">+$9,800</span></td>
                                            <td class="font-medium">ETH/USDT +280%</td>
                                        </tr>
                                        <tr>
                                            <td class="font-medium">November 2023</td>
                                            <td>38</td>
                                            <td><span class="profit-positive profit-badge">84%</span></td>
                                            <td><span class="profit-positive profit-badge">+$7,200</span></td>
                                            <td class="font-medium">SOL/USDT +410%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg">
                                <div class="flex items-center">
                                    <i class="fas fa-chart-line text-green-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium text-green-800">Average Monthly Performance</p>
                                        <p class="text-sm text-green-600">85% Win Rate | +$8,230 Average Profit</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            // Show Toast Message
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `fixed top-24 right-6 z-50 px-6 py-3 rounded-lg shadow-lg text-white font-medium animate__animated animate__fadeInRight ${
                            type === 'success' ? 'bg-green-500' : 
                            type === 'error' ? 'bg-red-500' : 
                            type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
                        }`;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('animate__fadeOutRight');
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 300);
                }, 3000);
            }

            // Loading Screen Functionality
            function startLoading() {
                let progress = 0;
                let messageIndex = 0;
                
                const interval = setInterval(() => {
                    progress += 2;
                    progressFill.style.width = `${progress}%`;
                    
                    if (progress % 20 === 0 && messageIndex < loadingMessages.length) {
                        loadingText.textContent = loadingMessages[messageIndex];
                        messageIndex++;
                    }
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        loadingScreen.style.opacity = '0';
                        
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            mainWebsite.classList.remove('hidden');
                            
                            // Initialize app
                            loadAnnouncements();
                            loadNotifications();
                            loadOffers();
                            loadFreeSignals();
                            checkLoginStatus();
                            updateNotificationBadge();
                            
                            // Initialize Glassmorphism Account
                            initializeGlassmorphismAccount();
                            updateGlassmorphismUI();
                            
                            // Setup real-time listeners
                            setupRealtimeListeners();
                            
                            // Auto refresh offers every 30 seconds
                            setInterval(loadOffers, 30000);
                            
                            window.scrollTo(0, 0);
                            
                            console.log('App loaded successfully');
                        }, 500);
                    }
                }, 50);
            }

            // Setup real-time listeners
            function setupRealtimeListeners() {
                if (!initializeFirebase()) return;
                
                // Real-time offers listener
                const offersRef = window.firebaseRef(window.firebaseDatabase, OFFERS_DB_REF);
                window.firebaseOnValue(offersRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        const newOffers = Object.values(data).filter(offer => 
                            offer.isActive && (!offer.expiresAt || new Date(offer.expiresAt) > new Date())
                        );
                        
                        newOffers.sort((a, b) => {
                            if (a.featured && !b.featured) return -1;
                            if (!a.featured && b.featured) return 1;
                            if (a.expiresAt && b.expiresAt) {
                                return new Date(a.expiresAt) - new Date(b.expiresAt);
                            }
                            return 0;
                        });
                        
                        offers = newOffers;
                        displayOffers();
                    }
                });
                
                // Real-time announcements listener
                const announcementsRef = window.firebaseRef(window.firebaseDatabase, ANNOUNCEMENTS_DB_REF);
                window.firebaseOnValue(announcementsRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        const newAnnouncements = Object.entries(data)
                            .map(([key, value]) => ({ key, ...value }))
                            .filter(announcement => 
                                announcement.isActive !== false && 
                                (!announcement.expiresAt || new Date(announcement.expiresAt) > new Date())
                            )
                            .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                        
                        announcements = newAnnouncements;
                        displayAnnouncements();
                    }
                });
                
                // Real-time notifications listener
                const notificationsRef = window.firebaseRef(window.firebaseDatabase, NOTIFICATIONS_DB_REF);
                window.firebaseOnValue(notificationsRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        const newNotifications = Object.values(data).filter(notification => 
                            notification.isActive && (!notification.expiresAt || new Date(notification.expiresAt) > new Date())
                        );
                        
                        newNotifications.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                        
                        notifications = newNotifications;
                        initNotifications();
                        updateNotificationBadge();
                    }
                });
                
                // Real-time free signals listener
                const signalsRef = window.firebaseRef(window.firebaseDatabase, FREE_SIGNALS_DB_REF);
                window.firebaseOnValue(signalsRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        const newSignals = Object.values(data).filter(signal => 
                            signal.isActive && (!signal.expiresAt || new Date(signal.expiresAt) > new Date())
                        );
                        
                        newSignals.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                        
                        freeSignals = newSignals;
                        displayFreeSignals();
                        
                        // Show notification if new signal added
                        if (freeSignals.length > 0 && freeSignals[0].createdAt > lastSignalUpdate) {
                            showToast('New free signal available!', 'info');
                            lastSignalUpdate = freeSignals[0].createdAt;
                        }
                    }
                });
            }

            // Modal Functions
            function openLoginModal(tab = 'login') {
                console.log('Opening login modal with tab:', tab);
                loginModal.style.display = 'flex';
                document.body.classList.add('modal-open');
                glassDropdown.classList.remove('active');
                notificationDropdown.classList.remove('active');
                mobileNav.classList.remove('active');
                mobileMenuToggle.querySelector('i').className = 'fas fa-bars';
                
                if (tab === 'login') {
                    loginTabBtn.classList.add('active');
                    registerTabBtn.classList.remove('active');
                    loginForm.classList.remove('hidden');
                    registerForm.classList.add('hidden');
                } else {
                    registerTabBtn.classList.add('active');
                    loginTabBtn.classList.remove('active');
                    registerForm.classList.remove('hidden');
                    loginForm.classList.add('hidden');
                }
                
                loginUsernameInput.value = '';
                loginPasswordInput.value = '';
                registerUsernameInput.value = '';
                registerEmailInput.value = '';
                registerPasswordInput.value = '';
                registerConfirmPasswordInput.value = '';
                registerWhatsAppInput.value = '';
                
                if (tab === 'login') {
                    setTimeout(() => {
                        loginUsernameInput.focus();
                    }, 300);
                } else {
                    setTimeout(() => {
                        registerUsernameInput.focus();
                    }, 300);
                }
            }

            function closeLoginModal() {
                console.log('Closing login modal');
                loginModal.style.display = 'none';
                document.body.classList.remove('modal-open');
            }

            // Mobile Menu Toggle
            mobileMenuToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                mobileNav.classList.toggle('active');
                const icon = this.querySelector('i');
                icon.className = mobileNav.classList.contains('active') ? 'fas fa-times' : 'fas fa-bars';
                
                glassDropdown.classList.remove('active');
                notificationDropdown.classList.remove('active');
            });

            // Notification Toggle
            notificationBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationDropdown.classList.toggle('active');
                glassDropdown.classList.remove('active');
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!notificationBtn.contains(e.target) && !notificationDropdown.contains(e.target)) {
                    notificationDropdown.classList.remove('active');
                }
                
                if (!glassAccountIcon.contains(e.target) && !glassDropdown.contains(e.target)) {
                    glassDropdown.classList.remove('active');
                }
                
                if (!mobileMenuToggle.contains(e.target) && !mobileNav.contains(e.target)) {
                    mobileNav.classList.remove('active');
                    mobileMenuToggle.querySelector('i').className = 'fas fa-bars';
                }
            });

            // Event Listeners
            joinVipBtn.addEventListener('click', () => {
                window.location.href = '#pricing';
                mobileNav.classList.remove('active');
                mobileMenuToggle.querySelector('i').className = 'fas fa-bars';
            });

            mobileJoinVipBtn.addEventListener('click', () => {
                window.location.href = '#pricing';
                mobileNav.classList.remove('active');
                mobileMenuToggle.querySelector('i').className = 'fas fa-bars';
            });

            mobileLoginBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('Mobile menu login button clicked');
                openLoginModal('login');
            });
            
            mobileLogoutBtn.addEventListener('click', logout);

            // Subscribe for Offers Button
            subscribeOffersBtn.addEventListener('click', function() {
                if (!currentUser) {
                    showToast('Please login to subscribe for offers', 'warning');
                    openLoginModal('login');
                    return;
                }
                
                const userEmail = currentUser.email || currentUser.username + '@example.com';
                
                if (initializeFirebase()) {
                    const subscriptionRef = window.firebaseRef(window.firebaseDatabase, `${SUBSCRIPTIONS_DB_REF}/${currentUser.username}`);
                    const subscriptionData = {
                        email: userEmail,
                        whatsapp: currentUser.whatsapp,
                        subscribedAt: new Date().toISOString(),
                        preferences: {
                            offers: true,
                            signals: true,
                            news: true
                        }
                    };
                    
                    window.firebaseSet(subscriptionRef, subscriptionData)
                        .then(() => {
                            showToast('Successfully subscribed for exclusive offers!', 'success');
                        })
                        .catch(error => {
                            console.error('Error subscribing:', error);
                            showToast('Subscribed for offers!', 'success');
                        });
                } else {
                    showToast('Subscribed for exclusive offers!', 'success');
                }
            });

            // Tab Switching
            loginTabBtn.addEventListener('click', () => {
                loginTabBtn.classList.add('active');
                registerTabBtn.classList.remove('active');
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
            });

            registerTabBtn.addEventListener('click', () => {
                registerTabBtn.classList.add('active');
                loginTabBtn.classList.remove('active');
                registerForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
            });

            switchToRegister.addEventListener('click', (e) => {
                e.preventDefault();
                registerTabBtn.click();
            });

            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                loginTabBtn.click();
            });

            // Login Form Submission
            loginSubmitBtn.addEventListener('click', function() {
                const username = loginUsernameInput.value.trim();
                const password = loginPasswordInput.value.trim();
                
                if (!username || !password) {
                    showToast('Please enter both username and password', 'error');
                    return;
                }
                
                const originalText = this.innerHTML;
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Logging in...';
                
                setTimeout(() => {
                    if (login(username, password)) {
                        // Success - handled in login function
                    } else {
                        showToast('Invalid username or password', 'error');
                    }
                    
                    this.disabled = false;
                    this.innerHTML = originalText;
                }, 1000);
            });

            // Register Form Submission
            registerSubmitBtn.addEventListener('click', function() {
                const username = registerUsernameInput.value.trim();
                const email = registerEmailInput.value.trim();
                const password = registerPasswordInput.value.trim();
                const confirmPassword = registerConfirmPasswordInput.value.trim();
                const whatsapp = registerWhatsAppInput.value.trim();
                
                if (!username || !email || !password || !confirmPassword || !whatsapp) {
                    showToast('Please fill all fields', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showToast('Passwords do not match', 'error');
                    return;
                }
                
                if (password.length < 8) {
                    showToast('Password must be at least 8 characters long', 'error');
                    return;
                }
                
                const originalText = this.innerHTML;
                this.disabled = true;
                this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
                
                setTimeout(() => {
                    const success = register(username, email, password, confirmPassword, whatsapp);
                    
                    if (!success) {
                        this.disabled = false;
                        this.innerHTML = originalText;
                    }
                }, 500);
            });

            // Allow Enter key in forms
            loginPasswordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    loginSubmitBtn.click();
                }
            });

            // Close modals with buttons
            closeLoginBtn.addEventListener('click', closeLoginModal);
            closeRegisterBtn.addEventListener('click', closeLoginModal);

            // Close modal when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target === loginModal) {
                    closeLoginModal();
                }
            });

            // Mark all notifications as read
            document.getElementById('mark-all-read')?.addEventListener('click', function(e) {
                e.stopPropagation();
                notifications.forEach(notification => {
                    notification.unread = false;
                });
                updateNotificationBadge();
                initNotifications();
                showToast('All notifications marked as read', 'success');
            });

            // Navigation Smooth Scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href === '#' || href === '#!') return;
                    
                    e.preventDefault();
                    
                    const targetId = href.substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(link => {
                            link.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        mobileNav.classList.remove('active');
                        mobileMenuToggle.querySelector('i').className = 'fas fa-bars';
                    }
                });
            });

            // Update active nav link on scroll
            window.addEventListener('scroll', function() {
                const scrollPosition = window.scrollY;
                const sections = document.querySelectorAll('section[id]');
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.clientHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === '#' + sectionId) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            });

            // WhatsApp number input
            registerWhatsAppInput.addEventListener('input', function(e) {
                let value = this.value.replace(/\D/g, '');
                
                if (value.length > 10) {
                    value = value.substring(0, 10);
                }
                
                this.value = value;
            });

            // Handle mobile keyboard adjustments
            function handleMobileKeyboard() {
                if (window.innerWidth <= 768) {
                    const inputs = document.querySelectorAll('.form-input');
                    inputs.forEach(input => {
                        input.addEventListener('focus', function() {
                            setTimeout(() => {
                                this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }, 300);
                        });
                    });
                }
            }

            // Start loading animation
            startLoading();
            handleMobileKeyboard();
        });
    </script>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, get, update, remove, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyDcFLrmoKuyiFpm48gWrOQRcC8nd6sUWio",
            authDomain: "smvip2-8d131.firebaseapp.com",
            databaseURL: "https://smvip2-8d131-default-rtdb.firebaseio.com",
            projectId: "smvip2-8d131",
            storageBucket: "smvip2-8d131.firebasestorage.app",
            messagingSenderId: "113699989330",
            appId: "1:113699989330:web:5e68b8160362eae509fc8b",
            measurementId: "G-B023JGDMGJ"
        };

        try {
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            
            window.firebaseDatabase = database;
            window.firebaseRef = ref;
            window.firebaseSet = set;
            window.firebaseGet = get;
            window.firebaseUpdate = update;
            window.firebaseRemove = remove;
            window.firebaseOnValue = onValue;
            
            console.log('Firebase initialized successfully');
        } catch (error) {
            console.error('Firebase initialization error:', error);
            console.log('Running in fallback mode (offline)');
        }
    </script>
</body>
</html>